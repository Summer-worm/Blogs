# 附录一：与网络科学有关的图论基本知识

## 理论部分

### 1.1 网络和图

1.节点数 ![N] : 表示系统中组成部分的个数。我们通常将称为网络大小。 为便于区分，网络中的各个节点记为 ![i=1,2... N] 。 

2\. 链接数 $L] ，表示节点间交互关系的总数。 链接可以通过其连接的两个节点来标记。例如，$$\(2, 4\)$ 表示连接节点 ![2$$和节点 ![4] 的 链接。

其实就是图论里的$G=\(V,E\)$。换了字母表示而已。

如果一个网络中所有的链接都是有向的，我们称之为有向网络或有向图。 如果其所有链接都是无向的，我们称之为无向网络或无向图。（与图论里的定义完全相同）。

### 1.2 度,平均度和度分布

度表示该节点和其他节点之间的链接个数。我们用 ![k_{i}] 表示网络中第 ![i] 个节点的度。 

在无向网络中，总链接数可以使用节点度之和$L=\\frac{1}{2}\\sum_{i=1}^{N}{k_{i}}$来表示（欧拉握手定理）。

在无向网络中，平均度被定义为：$<k>=\\frac{1}{N}\\sum_{i=1}^{N}{k_{i}}=\\frac{2L}{N}]

有向网络中，需要区分入度 ![k_{i}^{in}$和出度 ![k_{i}^{out}] 。入度为指向点 ![i] 的边数，出度为从点 ![i] 指向别的点的边数。

![k_{i}=k_{i}^{in}+k_{i}^{out}]

且 ![L=k_{i}^{in}=k_{i}^{out}]$<k_{i}^{in}>=\\frac{1}{N}\\sum_{i=1}^{N}{k_{i}^{in}}=\\frac{L}{N}]

$$<k_{i}^{out}>=\\frac{1}{N}\\sum_{i=1}^{N}{k_{i}^{out}}=\\frac{L}{N}$$
度分布表示网络中随机选出的一个节点其度为 ![p_{k}$ 的概率。

$\\sum_{k=1}^{N}{p_{k}}=1]

对于有 ![N$ 个节点的网络而言，其度分布可以表示成归一化的直方图 :

$p_{k}=\\frac{N_{k}}{N}$ 。

其中 ![N_{k}] 是指度为 ![k] 的节点个数。

网络平均度可以用度分布表示为：

$<k>=\\sum_{k=0}^{\\infty}{kp_{k}}$ 。

实际上平均度就是度分布的数学期望。

### 1.4 邻接矩阵

一个拥有 ![N] 个节点的有向网络，其邻接矩阵有 ![N] 行 ![N] 列，邻接矩阵的元素 ![A_{ij}] 定 义如下：如果存在一个链接从 ![i] 节点指向 ![j] 节点，则 ![A_{ij}=1] ；如果节点 ![i] 和节点 ![j] 彼此不相连，则 ![A_{ij}=0] 。

易得无向网络的邻接矩阵是对称的。

对于无向网络，一个节点的度是邻接矩阵中相应行或列中所有元素之和，即： $k_{i}=\\sum_{j=1}^{N}{A_{ij}}=\\sum_{j=1}^{N}{A_{ji}}]

对于有向网络，邻接矩阵中一行元素之和及一列元素之和分别对应着节点的入度和出度，即：$$k_{i}^{in}=\\sum_{j=1}^{N}{A_{ij}}$$
， ![k_{i}^{out}=\\sum_{j=1}^{N}{A_{ji}}$ 。

**对于邻接矩阵乘方，运用数学归纳法，有如下性质：网络中从点![i] 到 ![j] 的路径长为 ![l] 的路径数量为** ![A_{ij}^{l}] 。

如果任意两个节点之间都有链接相连，称该图为完全图。此时 ![L] 取最大值 ![L_{max}]

真实网络通常是稀疏的，即 $L\\ll L_{max}$ 。

### 1.5 加权网络

加权网络中的每个链接 $\(i,j\)] 都有自己的权重 ![\\omega_{ij}$ 。令科学界感兴趣的大多数网络都是加权网络，但我们并不总能找到其合适的权 重。因此，我们经常使用无权网络来近似加权网络。

**梅特卡夫定律：网络的价值与网络节点个数的平方![N^{2}] 成正比。**

该定律基于公式： $L_{max}=\\frac{N\(N-1\)}{2}] 对于拥有个用户的通信网络，如果其每个链接的价值都是一样的，则网络总价值正比于$$\\frac{N\(N-1\)}{2}$ ，大致为 ![N^{2}$$。

但有两个问题限制了梅特卡夫定律的有效性：

  1.  _大多数网络是稀疏的，这意味着只有很小一部分链接会出现。因此，网络价值并非像![N^{2}] 那样增大，而是与网络大小 ![N] 呈线性关系。 _
  2. _链接是有权重的，并不是所有链接的价值都一样。有些链接经常被使用，而绝大多数链接很少被使用。_

可以利用邻接矩阵来生成权重：

如下图：

![](https://pic2.zhimg.com/v2-b6c96338f19d094abe6b35f2c8931e0d_1440w.jpg)$A=\\begin{pmatrix} 0,0,0,1\\\\ 1,0,0,0\\\\ 1,1,0,0\\\\ 1,0,1,0 \\end{pmatrix}$，$A^{2}=\\begin{pmatrix} 1,0,1,0\\\\ 0,0,0,1\\\\ 1,0,0,1\\\\ 1,1,0,1 \\end{pmatrix}$，$A^{3}=\\begin{pmatrix} 1,1,0,1\\\\ 1,0,1,0\\\\ 1,0,1,1\\\\ 2,0,1,1 \\end{pmatrix}$如果上图表示城市间的航空线路，可以用邻接矩阵乘方表示城市间的友好程度 一次就能到达的城市友好程度为 ![1] ，如 ![1] 到 ![2]

两次才能到达的城市友好程度为$\\frac{1}{2}] ，如 ![4$到 ![2]

三次才能到达的城市友好程度为$\\frac{1}{3}] ，如 ![2$到 ![1]

**二分网络** ：其节点可以分成两个不相交的节点集合 ![U] 和 ![V] ，使得每个链接都连接着一个 ![U] 中的节点和一个 ![V] 中的节点。（其实就是二部图）

### 1.6 路径和距离 

路径是指沿着网络中的链接行走经过的线路。 路径的长度表示其包含的链接个数。 

节点 ![i] 和节点 ![j] 之间的最短路径是指包含链接数最少的路径。 

最短路径的长度通常被称为节点 ![i] 和节点 ![j] 之间的距离，记为 ![d_{ij}] 或简记为 ![d] ， 同一对节点之间可能有多条长度相同的最短路径， 最短路径不会包含环或自环。

代码见代码部分“广度优先算法”(BFS)。

其基本思想如下：

寻找节点 ![i] 和节点 ![j] 之间最短路径的步骤如下： 

1\. 从节点 ![i] 出发 ， 将其标记为 ![0] ； 

2\. 找出与节点直接相连的节点，标记为距离 ![1] ， 然后将它们放到一个队列中； 

3\. 从队列中取出最前面的节点（其距离标记假设为 ![n] ），找出和该节点相连且尚未被标记的节点，将它们标记为 ![n+1] ，然后把它们放在队列的后面； 

4\. 重复步骤3，直到碰到目标节点或者队列中没有节点了； 

5\. 节点$i] 和节点 ![j] 之间的距离为节点 ![j] 的标记。如果节点 ![j] 没有标记 ，则 ![d_{ij}=\\infty$。

![](https://pic1.zhimg.com/v2-00f41ff7643da1c6f0a0942ef33e9142_1440w.jpg)

**网络直径** ，记为 ![d_{max}] ，是指网络中所有最短路径的最大长度，即指网络中所有节点对之间的最大距离。 

**平均路径长度** ，表示为 ![<d>] ，是指网络中所有节点对之间的平均距离。

### **1.7 连通性**

无向网络中，如果节点 ![i] 和节点 ![j] 之间存在一条路径，则它们是连通的。 

如果不存在路径$\(i,j\)$，则它们是不连通的。 如果一个网络的所有节点对都是连通的，我们说该网络是连通的。 如果网络中至少有一对节点是不连通的，则该网络是不连通的。我们把互不连通的两个子网络称为连通分支或簇。 

如果网络中包含两个连通分支，只需要选择合适的位置放置一个链接，就能使 网络变成连通的，这样的链接被称为**桥** 。 一般而言，桥是指断开之后网络就不再保持连通的链接。 (也就是图论里的**割边** ）

寻找网络的连通分支的基本想法：

1\. 从随机选择的一个节点 ![i] 出发，执行BFS算法。将从节点 ![i] 出发可到达的所有节点标记为 ![n=1] 。 

2\. 如果已标记节点的个数等于 ![N] ，则网络是连通的。如果已标记节点的个数小于 ![N] ，则网络包含多个连通分支。找出这些连通分支需要继续执行步骤3。 

3\. 标号增加$1] ，即 $$n\\rightarrow n+1$ 。选择一个未标记的节点 ![j$$，将其标记为 ![n] 。使用 BFS算法找出从节点 ![j] 出发可到达的所有节点 ，将它们都标记为 ![n] 。重复步骤直到标记完所有的节点为止。

### 1.10 集聚系数

集聚系数（聚类系数）刻画了一个节点的邻居节点之间彼此连接的稠密程度。 

对于一个度$k_{i}] 为的节点 $$i] ，其**局部集聚系数** （每个节点的集聚系数）定义为 ![C_{i}=\\frac{2L_{i}}{k_{i}\(k_{i}-1\)}] 。其中 ![L_{i}$ 表示节点 ![i$$的 ![k_{i}] 个邻居之间的链接数。 

![](https://pic3.zhimg.com/v2-8a88acf1df30ef45b100cc77cd40c24e_1440w.jpg)

![C_{i}] 表示节点 ![i] 的任意两个邻居彼此相连的概率。因此， ![C_{i}=0.5] 意味着节点 ![i] 的任意两个邻居有 ![0.5] 的概率彼此相连。 

![C_{i}] 刻画了网络的局部链接密度：节点的邻居之间连接越紧密，其局部集聚系数就越高。 

整个网络的集聚程度可以通过其所有节点的**平均集聚系数** 来刻画，**定义为**$<C>=\\frac{1}{N}\\sum_{i=1}^{N}{C_{i}}$。平均集聚系数的概率化解释是：**随机选择一个节点，其两个邻居彼此相连的概率。**

网络的全局集聚程度可以通过**全局集聚系数** 来体现，定义为：$C_{\\Delta}=\\frac{3\\times 三角形个数}{连通三元组个数}$

![](https://pic3.zhimg.com/v2-c0492248d1713e1b739eeea1d31818fc_1440w.jpg)

## 代码实践：

其中有关于图论和网络科学的程序，使用jupyter notebook实现，内核语言为python3.10.6。需要安装networkx包和pandas包。

networkx包是一个专门用来研究网络科学的包。

代码地址为github链接：[Summer-worm/network](https://link.zhihu.com/?target=https%3A//github.com/Summer-worm/network.git)

**参考内容：**

《巴拉巴西网络科学》，ALBERT-LÁSZLÓ BARABÁSI

《图论及其应用》，卜月华，王维凡，吕新志编著。

《复杂性思考：复杂性科学和计算模型》，Allen，B．Downey